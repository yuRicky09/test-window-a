<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>我是A分頁</h1>
    <button id="btn">點我傳送訊息給iframe</button>
    <button id="btn2">點我跳到分頁B</button>
    <button id="btn3">點我跳到分頁C</button>
    <button id="btn4">點我傳訊息給分頁C</button>
    <iframe
      id="iframe"
      src="https://test-window-b.vercel.app/"
      width="500px"
      height="500px"
      frameborder="0"
    ></iframe>

    <script>
      const iframe = document.getElementById("iframe").contentWindow;

      document.getElementById("btn").addEventListener("click", () => {
        iframe.postMessage(
          `我的domain是${window.origin}`,
          "https://test-window-b.vercel.app/"
        );
      });

      document.getElementById("btn2").addEventListener("click", () => {
        const popup = window.open("https://test-window-b.vercel.app/");
        console.log(popup.origin);
      });

      document.getElementById("btn3").addEventListener("click", () => {
        const popup = window.open("https://steady-centaur-77a624.netlify.app/");

        document.getElementById("btn4").addEventListener("click", () => {
          popup.postMessage(
            `我的domain是${window.origin}`,
            "https://steady-centaur-77a624.netlify.app/"
          );
        });
      });
    </script>
  </body>
</html>
